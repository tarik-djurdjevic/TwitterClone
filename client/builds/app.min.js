var myApp=angular.module("myApp",[]);angular.module("myApp").controller("TweetController",["$scope","$http","User",function(t,r,e){t.user=e.user;var n=function(){console.log(t.user._id),r({url:"/tweets",method:"GET",params:{id:t.user._id}}).then(function(e){for(t.data={countTweets:e.data.obj.count,tweets:e.data.obj.tweets},index=0;index<t.data.countTweets;index++)t.data.tweets[index].createdOn=timeago().format(e.data.obj.tweets[index].createdOn);console.log(t.data.tweets)}),t.tweet={value:""}};setTimeout(n,100),t.addTweet=function(){r({url:"/tweets",method:"POST",params:{id:t.user._id},data:{tweet:t.tweet}}).then(function(e){n()})},t.removeTweet=function(e){r.delete("/tweets/"+e).then(function(e){n()})}}]);var Usr={firstName:"Tarik",lastName:"Djurdjevic",username:"tarik.djurdjevic",profilePicture:"avatar.png"};angular.module("myApp").factory("User",function(){var t={user:{},set:function(e){angular.copy(e,t.user)},get:function(){return this.user}};return t}),angular.module("myApp").controller("UserController",["$http","$scope","User",function(t,r,n){r.index=0,r.user=n.user,t({url:"/user",method:"GET"}).then(function(e){0===e.data.obj.count?t({url:"/user",method:"POST",data:{user:Usr}}).then(function(e){r.user=e.data.obj.users[r.index],n.set(r.user)}):r.index>e.data.obj.count?console.log("Not valid index of user"):(r.user=e.data.obj.users[r.index],n.set(r.user))})}]),angular.module("myApp").directive("profileBox",function(){return{restrict:"E",templateUrl:"/directives/profile-box.html"}}),angular.module("myApp").directive("tweetList",function(){return{restrict:"E",templateUrl:"/directives/tweets.html"}});